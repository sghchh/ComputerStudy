# 基础知识

## 一、操作系统

操作系统位于计算机硬件之上，**运行于内核态**，其向用户屏蔽了计算机硬件的细节与信息；其权限与通能如下：

* 操作系统负责管理硬件功能，调配硬件资源向用户提供服务
* 操作系统具有硬件的访问权，其运行在内核态

> 内核态与用户态：
>
> 操作系统运行与内核态，应用软件运行在用户态；内核态下可以直接操控硬件，可以执行CPU的任何指令；用户态下只能通过系统调用使用硬件功能，并且只能间接使用部分硬件资源，同时也只能执行部分CPU指令

注意：通常操作系统下的GUI或者shell叫做**用户程序接口**，其并不属于操作系统，并且是处于用户态下的。

## 二、认识硬件

### 1. CPU

CPU有特定的指令集，主流的有**精简指令集与复杂指令集**，其中ARM架构的CPU采用的是精简指令集，而x86架构的CPU采用的是复杂指令集。

**CPU也有两种模式对应内核态与用户态，其工作模式有状态寄存器中的一个二进制位决定。**

### 2. 内存

内存分为多个层级：

* 寄存器：封装在CPU中
* 高速缓存：分为L1、L2、L3高速缓存
* 主存
* 磁盘

#### 高速缓存

不同级别的高速缓存其内部都是以各自的**高速缓存行为单位**进行缓存的，比如一个512B的L1缓存，可以有8个64B的高速缓存行。

当应用程序需要从内存中读取关键词的时候，高速缓存的硬件会检查所需要的高速缓存行是否在高速缓存中，如果在的话，这就是高速缓存命中。

#### 虚拟内存与磁盘缓存

### 3. IO设备

IO设备一般包括两部分：设备本身与**设备控制器**。设备控制器能够控制物理设备，能够接受操作系统的指令。而每种类型的设备控制器都是不同的，所以需要不同的软件进行控制，**转门同控制器进行信息交流，发出命令、处理指令、接受响应的软件，称为设备驱动程序**。设备驱动程序由硬件厂家提供。

由于设备控制器需要处理指令、数据，因此**在设备控制器的内部有用于临时保存输入输出数据的内存---寄存器**，因此所有的IO设备的这些内存也构成了一个地址空间，叫做**IO端口空间**，每一个寄存器都有一个对应的**端口地址---端口号**。

在一些计算机中，对端口进行数据交流提供了专门的指令：**IN和OUT**。

#### IO设备与外中断

